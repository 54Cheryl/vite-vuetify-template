import{F,a as U}from"./FrontFooter-787774c6.js";import{_ as I,C as T,r,o as q,f as O,w as o,b as l,a as n,d as f,B as x}from"./index-f09a700d.js";const z={data(){return{copyTitle:"",OrderPurposeConfig:[{id:"0",name:"內部用(不列入統計報表)"},{id:"1",name:"參考"},{id:"2",name:"證明"}],purpose_id:"",recipet:"",taxId:"",contactperson:"",mobile:"",landline:"",postalcode:"",city:"",district:"",districtList:[],street:"",recipient:"",recipientphone:"",applicationContact:{purpose_id:"",taxId:"",recipet:"",contactperson:"",mobile:"",landline:"",recipient:"",recipientphone:"",postalcode:"",address:""},sendApp:{},getApp:{},delivery:"byPost",userlogdata:null,citylists:[],deliveryConfig:[{id:"3",title:"byPost",label:"郵局寄送(掛號郵資依圖資重量而定，約44元～180元不等)"}]}},components:{FrontHeader:F,FrontFooter:U},watch:{async copyTitle(s){s==="contactperson"?(this.recipient=this.contactperson,this.recipientphone=this.mobile):s==="applicant"&&(this.recipient=this.recipet,this.recipientphone="")},city(s){this.district=null,this.postalcode=null,s?this.getTownLists(s):this.districtList=[]},district(s){const t=this.districtList.filter(p=>p.id===s)[0];s&&(this.postalcode=t.zip)}},computed:{citys(){return this.setCityLists(),this.citylists},purposeConfig(){var t;const s=(t=this.userlogdata)==null?void 0:t.roleid;return s&&s>3?this.OrderPurposeConfig:this.OrderPurposeConfig.filter(p=>p.id!=="0")},taxidRule(){return this.taxId?[s=>!!s||"此欄位必填",s=>/^\d{8}$/.test(s)||"請輸入統一編號(8碼)"]:[!0]}},methods:{getCity(){return T("https://gistest.asrs.gov.tw/atisapi/WebProvide/adminRegion/city").then(t=>t.data).catch(t=>console.log(t))},setCityLists(){this.citylists.length||this.getCity().then(s=>{s.success?this.citylists=s.data.tableList:this.citylists=[]}).catch(s=>console.log(s))},cancelApply(){this.setSelectedPositionLists([]),this.clearApply(),this.$router.push("/admin/location-filter")},async clearApply(){await this.$refs.contactForm.reset()},async submitMagnifyApplication(){if((await this.$refs.contactForm.validate()).valid){Object.keys(this.applicationContact).forEach(a=>{this[a]&&(this.applicationContact[a]=this[a])});const t=this.citylists.filter(a=>a.id===this.city)[0],p=this.districtList.filter(a=>a.id===this.district)[0];this.applicationContact.address=`${t.name}${p.name}${this.street}`,this.sendApp={...this.applicationContact,delivery:this.deliveryConfig.filter(a=>a.title===this.delivery)[0].id,positionlists:this.magnify.selectedPositionLists},await this.sendAppForm(this.sendApp).then(a=>{if(a){this.getApp=a;const i=this.magnify.magnifyPositionLists.reduce((d,m)=>(this.magnify.selectedPositionLists.find(h=>h.id===m.id)||d.push(m),d),[]);this.magnify.magnifyPositionLists=i,this.magnify.magnifyPositionLists=this.magnify.magnifyPositionLists.filter(d=>!this.magnify.selectedPositionLists.some(m=>m.id===d.id)),localStorage.setItem("magnifyPositionLists",JSON.stringify(this.magnify.magnifyPositionLists)),this.clearApply(),this.$router.push("/admin/progress-query")}})}},getTownLists(s){this.districtList=[],this.getTownByCityid(s).then(t=>{t&&(this.districtList=t)})}},mounted(){}},B={class:"flex-grow-1 overflow-auto"},j={class:"mx-auto text-center py-2 py-sm-8 d-flex justify-center align-center"},N={class:"d-flex px-2 py-4"},H={class:"text-center my-4 my-sm-10 d-flex justify-space-evenly align-end flex-grow-1"},R={class:"text-center my-5 pb-4"};function S(s,t,p,a,i,d){const m=r("FrontHeader"),h=r("v-icon"),y=r("v-list-item"),b=r("v-select"),c=r("v-text-field"),v=r("v-sheet"),_=r("v-divider"),w=r("v-radio"),V=r("v-radio-group"),k=r("v-form"),g=r("v-btn"),C=r("FrontFooter"),L=r("v-layout"),P=r("v-col"),A=r("v-row");return q(),O(A,{justify:"center",class:"pa-0 ma-0"},{default:o(()=>[l(P,{cols:"12",sm:"12",class:"pa-0"},{default:o(()=>[l(L,{class:"h-screen d-flex flex-column ma-0 pa-0 bg-white"},{default:o(()=>[l(m),n("div",B,[n("div",j,[l(h,{class:"text-h3 text-sm-h2",color:"cyan-darken-4"},{default:o(()=>t[13]||(t[13]=[f("mdi-file-edit")])),_:1}),t[14]||(t[14]=n("div",{class:"px-auto"},[n("h2",{class:"px-auto pb-sm-1 text-sm-h4 font-weight-bold"},"填寫放大航空照片紙圖"),n("h2",{class:"text-sm-h4 font-weight-bold"},"申請單聯絡資訊")],-1))]),t[22]||(t[22]=n("p",{class:"text-h6 font-size-subtitle-rwd font-weight-bold text-center pb-sm-2"},"聯絡資訊：",-1)),l(k,{ref:"contactForm"},{default:o(()=>[l(v,{color:"cyan-lighten-5",rounded:"lg",class:"mx-2 mt-2 mb-4 px-3 pb-5 pt-8"},{default:o(()=>[l(b,{modelValue:i.purpose_id,"onUpdate:modelValue":t[0]||(t[0]=e=>i.purpose_id=e),items:d.purposeConfig,"item-title":"name","item-value":"id",density:"comfortable",label:"申請目的(僅限申請目的內使用)",color:"cyan-darken-2","bg-color":"white",variant:"outlined",required:"",class:"mb-3",rules:[e=>!!e||"請選擇一項申請目的！"]},{item:o(({props:e,item:u})=>[l(y,x(e,{title:u.raw.name}),null,16,["title"])]),_:1},8,["modelValue","items","rules"]),l(c,{modelValue:i.taxId,"onUpdate:modelValue":t[1]||(t[1]=e=>i.taxId=e),label:"統一編號(非身分證字號)",color:"cyan-darken-2","bg-color":"white",variant:"outlined",required:"",class:"mb-3 rwd-text-field",rules:d.taxidRule},null,8,["modelValue","rules"]),l(c,{modelValue:i.recipet,"onUpdate:modelValue":t[2]||(t[2]=e=>i.recipet=e),label:"收據抬頭(申請人)",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"mb-3 rwd-text-field",required:"","persistent-hint":"",hint:i.taxId?"＊請確認收據抬頭是否為機關/公司名稱":"",rules:[e=>!!e||"收據抬頭(申請人） 是必需資訊",e=>/^[\u4e00-\u9fa5]+$/u.test(e)||"收據抬頭(申請人） 僅接受中文正楷"]},null,8,["modelValue","hint","rules"]),l(c,{modelValue:i.contactperson,"onUpdate:modelValue":t[3]||(t[3]=e=>i.contactperson=e),label:"聯絡人",color:"cyan-darken-2","bg-color":"white",variant:"outlined",required:"",class:"mb-3 rwd-text-field",rules:[e=>!!e||"聯絡人 是必需資訊",e=>/^[\u4e00-\u9fa5]+$/u.test(e)||"聯絡人 僅接受中文正楷"]},null,8,["modelValue","rules"]),l(c,{modelValue:i.mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>i.mobile=e),label:"聯絡電話(手機)",placeholder:"0910123456",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"mb-3 rwd-text-field",required:"","persistent-hint":"",hint:"＊申請狀態更新會透過簡訊發送",rules:[e=>!!e||"此欄位必填",e=>/^09[0-9]{8}$/.test(e)||"手機格式需為09開頭的10碼數字"]},null,8,["modelValue","rules"]),l(c,{modelValue:i.landline,"onUpdate:modelValue":t[5]||(t[5]=e=>i.landline=e),label:"聯絡電話(市話)",placeholder:"0212345678",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"rwd-text-field",required:""},null,8,["modelValue"])]),_:1}),t[17]||(t[17]=n("div",{class:"mx-2 px-4 mb-4"},[n("div",{class:"d-inline-block"},[n("p",{class:"text-h6 text-sm-h5 font-weight-medium"}," 選擇取件方式：郵局寄送 "),n("p",{class:"text-body-1 text-sm-h6 font-weight-bold text-red-accent-4"}," (掛號郵資依圖資重量而定，約44元~180元不等) ")])],-1)),l(_,{thickness:2,color:"cyan-darken-2",class:"border-opacity-75 mx-2"}),t[18]||(t[18]=n("p",{class:"text-h6 font-size-subtitle-rwd font-weight-bold text-center mt-3 mt-sm-5"},"寄送資訊：",-1)),l(v,{color:"cyan-lighten-5",rounded:"lg",class:"mx-2 mb-4 mt-2 mt-sm-4 px-3 pb-4 pt-2"},{default:o(()=>[n("div",N,[l(V,{modelValue:i.copyTitle,"onUpdate:modelValue":t[6]||(t[6]=e=>i.copyTitle=e),inline:"","hide-details":"auto",color:"cyan-darken-4",class:"pt-0 mt-0 text-sm-h5"},{default:o(()=>[l(w,{value:"contactperson"},{label:o(()=>t[15]||(t[15]=[n("p",{class:"text-h6 text-sm-h5 ps-sm-1"},"同聯絡人",-1)])),_:1}),l(w,{class:"ml-4",value:"applicant"},{label:o(()=>t[16]||(t[16]=[n("p",{class:"text-h6 text-sm-h5 ps-sm-1"},"同申請人",-1)])),_:1})]),_:1},8,["modelValue"])]),l(c,{modelValue:i.recipient,"onUpdate:modelValue":t[7]||(t[7]=e=>i.recipient=e),label:"收件人/單位",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"mb-3 rwd-text-field",rules:[e=>!!e||"收據抬頭(申請人） 是必需資訊",e=>/^[\u4e00-\u9fa5]+$/u.test(e)||"收據抬頭(申請人） 僅接受中文正楷"]},null,8,["modelValue","rules"]),l(c,{modelValue:i.recipientphone,"onUpdate:modelValue":t[8]||(t[8]=e=>i.recipientphone=e),label:"收件人電話",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"mb-3 rwd-text-field",rules:[e=>!!e||"此欄位必填"]},null,8,["modelValue","rules"]),l(c,{modelValue:i.postalcode,"onUpdate:modelValue":t[9]||(t[9]=e=>i.postalcode=e),label:"郵遞區號(系統帶入)",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"rwd-text-field",readonly:"",disabled:""},null,8,["modelValue"]),l(b,{modelValue:i.city,"onUpdate:modelValue":t[10]||(t[10]=e=>i.city=e),items:d.citys,"item-title":"name","item-value":"id",density:"comfortable",label:"縣市","bg-color":"cyan-darken-2",variant:"solo",class:"mb-3",rules:[e=>!!e||"此欄位必填"]},{item:o(({props:e,item:u})=>[l(y,x(e,{title:u.raw.name}),null,16,["title"])]),_:1},8,["modelValue","items","rules"]),l(b,{modelValue:i.district,"onUpdate:modelValue":t[11]||(t[11]=e=>i.district=e),items:i.districtList,"item-title":"name","item-value":"id",density:"comfortable",label:"鄉鎮市區","bg-color":"cyan-darken-2",variant:"solo",class:"mb-3",rules:[e=>!!e||"此欄位必填"]},{item:o(({props:e,item:u})=>[l(y,x(e,{title:u.raw.name}),null,16,["title"])]),_:1},8,["modelValue","items","rules"]),l(c,{modelValue:i.street,"onUpdate:modelValue":t[12]||(t[12]=e=>i.street=e),label:"門牌地址",placeholder:"請輸入詳細地址",color:"cyan-darken-2","bg-color":"white",variant:"outlined",class:"rwd-text-field",rules:[e=>!!e||"此欄位必填"]},null,8,["modelValue","rules"])]),_:1})]),_:1},512),n("div",H,[l(g,{"prepend-icon":"mdi-close",rounded:"xl",class:"text-white font-weight-black text-h6 text-sm-h4 smallup-btn-h smallup-btn-radius",color:"cyan-darken-3",variant:"flat",size:"large",onClick:d.cancelApply},{default:o(()=>t[19]||(t[19]=[f(" 取消 ")])),_:1},8,["onClick"]),l(g,{"prepend-icon":"mdi-file-document-remove-outline",rounded:"xl",class:"text-white font-weight-black text-h6 text-sm-h4 smallup-btn-h smallup-btn-radius",color:"cyan-darken-3",variant:"flat",size:"large",onClick:d.clearApply},{default:o(()=>t[20]||(t[20]=[f(" 重新填寫 ")])),_:1},8,["onClick"])]),n("div",R,[l(g,{"prepend-icon":"mdi-check",rounded:"xl",class:"text-white font-weight-black text-h6 text-sm-h4 smallup-btn-h smallup-btn-radius",color:"cyan-darken-3",variant:"flat",size:"large",onClick:d.submitMagnifyApplication},{default:o(()=>t[21]||(t[21]=[f(" 確定，送出申請 ")])),_:1},8,["onClick"])])]),l(C)]),_:1})]),_:1})]),_:1})}const J=I(z,[["render",S],["__scopeId","data-v-184a09bc"]]);export{J as default};
