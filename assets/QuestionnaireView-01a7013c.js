import{_ as U,C as j,r,o as d,c as u,b as t,w as s,F as p,a as o,g as D,d as a,t as v,f as Q,A as y}from"./index-f293db00.js";const B={data(){return{questionnaireDialog:!1,sendQuestionnaireDialog:!1,errorPathDialog:!0,errorRepeatDialog:!1,tmpErrorRepeat:{},questionnaireInfo:{title:"親愛的受訪者您好：",text:"為持續精進平臺的服務品質，請您將【使用的感受】就以下問題填寫。您對本平臺服務之滿意度，將是本機關後續的重要參考，謝謝您的協助！"},qstCategory:[],questionList:[],device:"",tmpAns:[],order_no:"",order_no_Index:1,LinkOK:!1,ValidityPeriod:!1}},watch:{tmpAns:{handler(n){},deep:!0}},components:{},methods:{pathToAtisweb(){this.sendQuestionnaireDialog=!1,window.location.href="/"},async getQuestionnaireCategory(){try{const n=await j.get("/vite-vuetify-template/QCategory.json");this.qstCategory=n.data.results}catch(n){console.error("Error fetching questionnaire data:",n)}},async getQuestionnaireQST(){try{const n=await j.get("/vite-vuetify-template/Questionnaire.json");this.questionList=n.data.results}catch(n){console.error("Error fetching questionnaire data:",n)}this.questionList=Object.keys(this.questionList).reduce((n,e)=>((e==="1"||e===String(this.order_no_Index))&&(n[e]=this.questionList[e]),n),{})},async submitQuestionnaire(){if(!(await this.$refs.QuestionnaireForm.validate()).valid)return;const e=Object.entries(this.tmpAns).map(([h,i])=>({questionId:Number(h),rating:i})),_={order_no:this.order_no,device:this.device,questionnaire:e};console.log(_)},decryptData(){const{orderId:n}=this.$route.params;console.log(n),this.order_no_Index=n.substring(0,1)==="w"?2:3,this.questionnaireDialog=!0},checkSurveyDate(){const n=new Date;if(!this.order_no)return;const e="20"+this.order_no.substring(1,7),_=new Date(e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8)),h=n-_;Math.floor(h/(1e3*60*60*24))<=30?(this.ValidityPeriod=!0,this.questionnaireDialog=!0):this.ValidityPeriod=!1}},mounted(){this.getQuestionnaireCategory(),this.decryptData(),this.getQuestionnaireQST()}},E={class:"overflow-auto flex-grow-1 d-flex flex-column"},O={class:"bg-light-green-lighten-3",style:{"border-bottom":"1px solid #00838F"}},P={key:0,class:"py-3 text-h5 font-weight-medium text-center"},z={class:"mb-2 text-h6 text-sm-h5 font-weight-regular ms-1"},K={class:"text-center mb-6"},R={class:"px-4"},M={class:"text-center my-4"},G={class:"text-center my-4"};function H(n,e,_,h,i,C){const c=r("v-radio"),I=r("v-radio-group"),f=r("v-card-text"),b=r("v-divider"),x=r("v-card"),w=r("v-btn"),S=r("v-form"),k=r("v-col"),q=r("v-row"),N=r("v-container"),A=r("v-icon"),F=r("v-card-title"),L=r("v-dialog");return d(),u(p,null,[t(N,null,{default:s(()=>[t(q,{justify:"center"},{default:s(()=>[t(k,{cols:"12",sm:"auto",class:"pa-0"},{default:s(()=>[e[14]||(e[14]=o("h1",{class:"text-h3 font-weight-bold text-center text-cyan-darken-4 m-0 mt-2"},"平臺服務之滿意度表",-1)),o("div",E,[t(x,{class:"px-3 py-6 overflow-auto border-none"},{default:s(()=>[t(S,{ref:"QuestionnaireForm"},{default:s(()=>[(d(!0),u(p,null,D(i.questionList,(m,g)=>(d(),Q(x,{rounded:"lg",class:"elevation-0 mb-4",style:{border:"1px solid #00838F"},key:g},{default:s(()=>[o("div",O,[(d(!0),u(p,null,D(i.qstCategory,l=>(d(),u(p,{key:l.category_id},[g==l.category_id?(d(),u("p",P,v(g==l.category_id?l.category_name:""),1)):y("",!0)],64))),128))]),g==1?(d(),u(p,{key:0},[g==1?(d(),Q(f,{key:0,class:"bg-light-green-lighten-5"},{default:s(()=>[e[6]||(e[6]=o("p",{class:"mb-2 text-h6 text-sm-h5 font-weight-regular ms-1"},"請問您操作平臺使用的設備？",-1)),t(I,{modelValue:i.device,"onUpdate:modelValue":e[0]||(e[0]=l=>i.device=l),inline:"",color:"cyan-darken-4",class:"text-h6 radio-label-opacity","hide-details":"auto",rules:[l=>!!l||"此欄位必填"]},{default:s(()=>[t(c,{value:"手機",class:"pe-sm-4 pe-md-8"},{label:s(()=>e[4]||(e[4]=[o("p",{class:"text-sm-h6 font-weight-regular"}," 手機/平板 ",-1)])),_:1}),t(c,{value:"電腦",class:"pe-sm-8"},{label:s(()=>e[5]||(e[5]=[o("p",{class:"text-sm-h6 font-weight-regular"},"電腦",-1)])),_:1})]),_:1},8,["modelValue","rules"])]),_:1})):y("",!0),t(b,{thickness:1,color:"cyan-darken-4",class:"border-opacity-50 m-0"})],64)):y("",!0),(d(!0),u(p,null,D(m,(l,T)=>(d(),u(p,{key:l.question_id},[t(f,{class:"bg-light-green-lighten-5"},{default:s(()=>[o("p",z,v(l.question),1),t(I,{modelValue:i.tmpAns[l.question_id],"onUpdate:modelValue":V=>i.tmpAns[l.question_id]=V,inline:"",color:"cyan-darken-4",class:"text-h6 radio-label-opacity","hide-details":"auto",rules:[V=>!!V||"此欄位必填"]},{default:s(()=>[t(c,{value:5,class:"pe-sm-4 pe-md-8"},{label:s(()=>e[7]||(e[7]=[o("p",{class:"text-sm-h6 font-weight-regular"}," 非常滿意 ",-1)])),_:1}),t(c,{value:4,class:"pe-sm-8"},{label:s(()=>e[8]||(e[8]=[o("p",{class:"text-sm-h6 font-weight-regular"},"滿意",-1)])),_:1}),t(c,{value:3,class:"pe-sm-8"},{label:s(()=>e[9]||(e[9]=[o("p",{class:"text-sm-h6 font-weight-regular"},"普通",-1)])),_:1}),t(c,{value:2,class:"pe-sm-8"},{label:s(()=>e[10]||(e[10]=[o("p",{class:"text-sm-h6 font-weight-regular"},"不滿意",-1)])),_:1}),t(c,{value:1,class:"pe-sm-8"},{label:s(()=>e[11]||(e[11]=[o("p",{class:"text-sm-h6 font-weight-regular"},"非常不滿意",-1)])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),T+1!==m.length?(d(),Q(b,{key:0,thickness:1,color:"cyan-darken-4",class:"border-opacity-50 m-0"})):y("",!0)],64))),128))]),_:2},1024))),128)),o("div",K,[e[13]||(e[13]=o("div",{class:"mb-4 text-sm-h5 text-cyan-darken-4 font-weight-medium"},[o("p",null,"如您有其他建議，請撥打本分署售圖"),o("p",null,[a("購圖專線"),o("span",{class:"text-red-darken-2"}," (02-89791558)"),a("，")]),o("p",null,"由專人為您服務。")],-1)),t(w,{"prepend-icon":"mdi-check",rounded:"xl",size:"x-large",color:"cyan-darken-3",class:"text-h6 text-sm-h5",onClick:C.submitQuestionnaire},{default:s(()=>e[12]||(e[12]=[a(" 送出 ")])),_:1},8,["onClick"])])]),_:1},512)]),_:1})])]),_:1})]),_:1})]),_:1}),t(L,{modelValue:i.questionnaireDialog,"onUpdate:modelValue":e[2]||(e[2]=m=>i.questionnaireDialog=m),scrollable:"",persistent:""},{default:s(()=>[t(q,{justify:"center"},{default:s(()=>[t(k,{cols:"12",sm:"7"},{default:s(()=>[t(x,{class:"pa-2 pa-sm-3"},{default:s(()=>[t(F,{class:"text-center text-cyan-darken-4 text-h6 text-sm-h5"},{default:s(()=>[t(A,{class:"me-1"},{default:s(()=>e[15]||(e[15]=[a("mdi-emoticon-excited-outline")])),_:1}),a(v(i.questionnaireInfo.title),1)]),_:1}),o("div",R,[t(b,{thickness:2,color:"cyan-darken-4",class:"border-opacity-50"})]),t(f,{class:"font-weight-medium text-sm-h6 line-height"},{default:s(()=>[a(v(i.questionnaireInfo.text),1)]),_:1}),t(f,{class:"text-red-darken-2 font-weight-medium text-sm-h6 line-height"},{default:s(()=>e[16]||(e[16]=[o("p",null,"＊提醒：",-1),o("p",null,"1.每張訂單之平臺滿意度問卷調查表限填一次",-1),o("p",null,"2.建議於收到圖資後填寫問卷",-1)])),_:1}),o("div",M,[t(w,{rounded:"xl",size:"large",color:"cyan-darken-3",class:"text-h6 text-sm-h5",onClick:e[1]||(e[1]=m=>i.questionnaireDialog=!1)},{default:s(()=>e[17]||(e[17]=[a(" 開始填寫 ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(L,{modelValue:i.sendQuestionnaireDialog,"onUpdate:modelValue":e[3]||(e[3]=m=>i.sendQuestionnaireDialog=m),scrollable:"",persistent:""},{default:s(()=>[t(q,{justify:"center"},{default:s(()=>[t(k,{cols:"12",sm:"7"},{default:s(()=>[t(x,{class:"py-2"},{default:s(()=>[t(F,{class:"text-center text-cyan-darken-4 text-h6 text-sm-h5 mb-2"},{default:s(()=>[t(A,{class:"me-2"},{default:s(()=>e[18]||(e[18]=[a("mdi-send-check")])),_:1}),e[19]||(e[19]=a("已送出問卷！"))]),_:1}),t(f,{class:"font-weight-medium text-center text-sm-h6 line-height pb-2"},{default:s(()=>e[20]||(e[20]=[a("感謝您提供寶貴的意見，我們致力於提供更好的服務！")])),_:1}),t(f,{class:"font-weight-medium text-center text-sm-h6 line-height pt-0"},{default:s(()=>e[21]||(e[21]=[a("＊提醒：系統將為您導向至本分署綜合服務主頁")])),_:1}),o("div",G,[t(w,{rounded:"xl",size:"large",color:"cyan-darken-3",class:"text-h6 text-sm-h5",onClick:C.pathToAtisweb},{default:s(()=>e[22]||(e[22]=[a(" OK ")])),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const W=U(B,[["render",H],["__scopeId","data-v-4e807da6"]]);export{W as default};
